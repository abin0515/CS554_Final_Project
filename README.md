# CS554 Final Project

## Service Deployments

### Deploy using Docker

We host or service dependencies locally using docker. To deploy our services:

* MongoDB (port 27017)
* Redis (port 6379)
* RabbitMQ (port 5672)

You can simply run:

```sh
docker compose up -d

# or if you use older version of docker:
docker-compose up -d
```

### Using our test endpoints (back up plan)

If you have any issue running docker deployment, try our server (you need to edit config in servers):

- MongoDB: `18.188.222.62:27017`
- Redis Stack Server:  `18.188.222.62:6379`

- RabbitMQ: `18.188.222.62:5672`

    * Admin User name: `myuser`

    * Password: `mypassword`


### Connection Configuration
The connection details for both databases are configured in the `config/settings.js` file. Please refer to this file for the connection strings when developing features that require database access.


## Getting Started

### Backend `likes_server`
```sh
npm install
npm start
```

### Backend `points_server`

```sh
npm install
npm start
```

### Backend `server`

```sh
npm install
# Optional: if you want to seed the database with sample data
npm run seed

npm start
```

#### Optional Settings:

Export these variables before `npm start`

```sh
# Optional: if you want to use your own Firebase domain for user authentication, set:
export FIREBASE_ADMIN_CERT_JSON_PATH="<PATH TO YOUR FIREBASE ADMIN CERT JSON>"
# Optional: if you want to use your own OpenAI API key, set:
export OPENAI_API_KEY="<YOUR OPENAI API KEY>"
```

`FIREBASE_ADMIN_CERT_JSON_PATH`:

* To allow backend user auth with Firebase, set environment variable `FIREBASE_ADMIN_CERT_JSON_PATH`  as the path of JSON cert file generated by Firebase console. If not set, a test Firebase admin cert with is used.
* REMEMBER to use credentials from the same Firebase project across front and backend!!

`OPENAI_API_KEY`:

* The chat feature is based on OpenAI LLM, which requires an [OpenAI API key](https://platform.openai.com/api-keys).
* When `OPENAI_API_KEY` is not set, it defaults to use test API key.

### Frontend `react_ui`

```sh
npm install

npm run build
npm run preview

(if you have problem with preview, try to just run `npm run dev`)
```
